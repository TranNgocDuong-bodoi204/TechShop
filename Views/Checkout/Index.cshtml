@using System.Text.Json
@using TechnicalShop.Models.DTO
@using TechnicalShop.Models.Enum
@model CheckoutViewDTO

@if(Model.TotalAmount != 0)
{
<div style="font-family:Arial,sans-serif; background-color:#f5f5f5; padding:30px;">

    <div style="max-width:850px; margin:0 auto; background:#fff; padding:35px; border-radius:12px; 
                box-shadow:0 4px 20px rgba(0,0,0,0.1);">

        <!-- Ti√™u ƒë·ªÅ -->
        <h2 style="text-align:center; margin-bottom:30px; color:#2c3e50;">üõí Thanh to√°n ƒë∆°n h√†ng</h2>

        <!-- Gi·ªè h√†ng t√≥m t·∫Øt -->
        <h3 style="margin-bottom:15px; color:#34495e;">Gi·ªè h√†ng c·ªßa b·∫°n</h3>
        <table style="width:100%; border-collapse:collapse; margin-bottom:30px; border:1px solid #ddd; border-radius:6px; overflow:hidden;">
            <thead>
                <tr style="background:#f8f9fa; border-bottom:1px solid #ddd;">
                    <th style="padding:12px; text-align:left;">S·∫£n ph·∫©m</th>
                    <th style="padding:12px; text-align:center;">S·ªë l∆∞·ª£ng</th>
                    <th style="padding:12px; text-align:right;">Gi√°</th>
                </tr>
            </thead>
            <tbody>
                @foreach(var item in Model.products)
                {
                <tr style="border-bottom:1px solid #eee;">
                    <td style="padding:12px;">@item.ProductName</td>
                    <td style="padding:12px; text-align:center;">@item.Quantity</td>
                    <td style="padding:12px; text-align:right; color:#e67e22; font-weight:bold;">@item.Price</td>
                </tr>
                }
                <tr style="background:#fdfdfd;">
                    <td colspan="2" style="padding:12px; text-align:right; font-weight:bold; color:#2c3e50;">T·ªïng c·ªông:</td>
                    <td style="padding:12px; text-align:right; font-weight:bold; color:#e74c3c;">@Model.TotalAmount</td>
                </tr>
            </tbody>
        </table>

        <!-- Th√¥ng tin kh√°ch h√†ng -->
        <h3 style="margin-bottom:15px; color:#34495e;">Th√¥ng tin ng∆∞·ªùi nh·∫≠n</h3>
        <form asp-action="CheckOut" asp-controller="Checkout" asp-area="Default">
            
            <!----Hidden value---->
            <input name="AccountId" value="@Model.AccountId" type="hidden"/>
            <input name="TotalAmount" value="@Model.TotalAmount" type="hidden"/>
            <input name="cartItemJson"  value="@JsonSerializer.Serialize(Model.products)" type="hidden"/>
            <div style="margin-bottom:15px;">
                <label style="font-weight:600;">T√™n ƒë·∫ßy ƒë·ªß:</label><br/>
                <input type="text" name="CustomerName" style="width:100%; padding:12px; border-radius:6px; border:1px solid #ccc;" placeholder="Nguy·ªÖn VƒÉn A"/>
            </div>
            <div style="margin-bottom:15px;">
                <label style="font-weight:600;">ƒê·ªãa ch·ªâ:</label><br/>
                <input type="text" name="Address" style="width:100%; padding:12px; border-radius:6px; border:1px solid #ccc;" placeholder="123 ƒê∆∞·ªùng ABC, Qu·∫≠n X"/>
            </div>
            <div style="margin-bottom:15px;">
                <label style="font-weight:600;">S·ªë ƒëi·ªán tho·∫°i:</label><br/>
                <input name="Phone" type="text"  style="width:100%; padding:12px; border-radius:6px; border:1px solid #ccc;" placeholder="0123456789"/>
            </div>
            
            <div style="margin-bottom:20px;">
            <label style="font-weight:600;">Email:</label><br/>
            <input type="email" name="Email"
             style="width:100%; padding:12px; border-radius:6px; border:1px solid #ccc; margin-bottom:8px;" 
             placeholder="example@gmail.com"/>

            <!-- Tick s·ª≠ d·ª•ng email ƒëƒÉng k√Ω -->
            <label style="display:flex; align-items:center; gap:8px; cursor:pointer; font-size:14px; color:#555;">
                <input name="emailReused" type="checkbox" style="width:16px; height:16px; accent-color:#3498db; cursor:pointer;"/>
                <span>D√πng email ƒëƒÉng k√Ω c·ªßa t√†i kho·∫£n</span>
            </label>
            </div>

            <!-- Ph∆∞∆°ng th·ª©c thanh to√°n -->
            <h3 style="margin-bottom:15px; color:#34495e;">Ph∆∞∆°ng th·ª©c thanh to√°n</h3>
            <div style="margin-bottom:25px; display:flex; gap:15px; flex-wrap:wrap;">

                <!-- COD -->
                <label class="payment-option" style="display:flex;align-items:center;gap:10px;cursor:pointer;padding:12px 16px;border:2px solid #ddd;border-radius:8px;background:#fafafa;transition:0.2s;flex:1 1 250px;"
                    onclick="document.querySelectorAll('.payment-option').forEach(el=>{el.style.borderColor='#ddd';el.style.background='#fafafa';}); 
                            this.style.borderColor='#3498db'; this.style.background='#eaf4fe'; 
                            this.querySelector('.custom-radio').style.borderColor='#3498db'; this.querySelector('.custom-radio').style.background='#3498db'; this.querySelector('.custom-radio').innerHTML='‚óè'; 
                            document.querySelectorAll('.custom-radio').forEach(r=>{ if(r!==this.querySelector('.custom-radio')){ r.style.borderColor='#aaa'; r.style.background='transparent'; r.innerHTML=''; }});">

                    <input type="radio" name="paymentMethod" value="@((int)PaymentMethod.COD)" checked style="display:none;" />
                    <span class="custom-radio" style="width:20px;height:20px;border:2px solid #3498db;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;font-size:14px;color:white;">‚óè</span>
                    <span style="color:#34495e;font-size:15px;font-weight:500;">Thanh to√°n khi nh·∫≠n h√†ng (COD)</span>
                </label>

                <!-- Bank -->
                <label class="payment-option" style="display:flex;align-items:center;gap:10px;cursor:pointer;padding:12px 16px;border:2px solid #ddd;border-radius:8px;background:#fafafa;transition:0.2s;flex:1 1 250px;"
                    onclick="document.querySelectorAll('.payment-option').forEach(el=>{el.style.borderColor='#ddd';el.style.background='#fafafa';}); 
                            this.style.borderColor='#3498db'; this.style.background='#eaf4fe'; 
                            this.querySelector('.custom-radio').style.borderColor='#3498db'; this.querySelector('.custom-radio').style.background='#3498db'; this.querySelector('.custom-radio').innerHTML='‚óè'; 
                            document.querySelectorAll('.custom-radio').forEach(r=>{ if(r!==this.querySelector('.custom-radio')){ r.style.borderColor='#aaa'; r.style.background='transparent'; r.innerHTML=''; }});">

                    <input type="radio" name="paymentMethod" value="@((int)PaymentMethod.Bank)" style="display:none;" />
                    <span class="custom-radio" style="width:20px;height:20px;border:2px solid #aaa;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;font-size:14px;color:white;"></span>
                    <span style="color:#34495e;font-size:15px;font-weight:500;">Chuy·ªÉn kho·∫£n ng√¢n h√†ng</span>
                </label>
            </div>



            <!-- N√∫t h√†nh ƒë·ªông -->
            <div style="text-align:center; margin-top:30px;">
                <button type="submit" 
                        style="padding:14px 32px; background-color:#28a745; color:#fff; 
                               font-size:16px; font-weight:bold; border:none; border-radius:6px; cursor:pointer; margin-right:15px;">
                    ‚úÖ ƒê·∫∑t h√†ng
                </button>
                <button type="button" 
                        onclick="window.location.href='/'"
                        style="padding:14px 32px; background-color:#dc3545; color:#fff; 
                               font-size:16px; font-weight:bold; border:none; border-radius:6px; cursor:pointer;">
                    ‚ùå H·ªßy
                </button>
            </div>
        </form>

    </div>

</div>
}else{
    <div style="text-align:center; padding:60px 20px; font-family:Arial,sans-serif;">
    <i class="fa fa-shopping-cart" style="font-size:60px; color:#ccc; margin-bottom:20px;"></i>
    <h2 style="color:#555; margin-bottom:10px;">Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng</h2>
    <p style="color:#888; margin-bottom:30px;">H√£y quay l·∫°i c·ª≠a h√†ng v√† th√™m s·∫£n ph·∫©m y√™u th√≠ch v√†o gi·ªè h√†ng nh√©.</p>
    <a href="/" 
       style="display:inline-block; padding:12px 25px; background-color:#007bff; 
              color:#fff; text-decoration:none; border-radius:6px; font-weight:bold;">
        üõçÔ∏è Ti·∫øp t·ª•c mua s·∫Øm
    </a>
    </div>
}
